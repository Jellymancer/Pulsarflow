
singularity {
        enabled = true
        runOptions = '-B /hercules:/hercules -B /scratch:/scratch --nv'
        envWhitelist = 'SINGULARITY_BINDPATH, SINGULARITY_LD_LIBRARY_PATH'
    }


// HTcondor Executor for APSUSE Cluster 

  process {
    executor = 'slurm'

    withLabel: 'filtool' {
        cpus = 6
        memory = '90 GB'
        time = '3d'
        queue = 'long.q'
        scratch = '/tmp/${USER}'
    }

    withLabel: 'nearest_power_two' {
        cpus = 1
        memory = '5 GB'
        time = '1h'
        queue = 'short.q'
        scratch = '/tmp/${USER}'
    }

    withLabel: 'peasoup' {
        cpus = 1
        memory = '90 GB'
        time = '4h'
        queue = 'short.q'
        clusterOptions = '--gres=gpu:1'
        scratch = '/tmp/${USER}'
    }

    withLabel: 'pulsarx' {
        cpus = 40
        memory = '80 GB'
        time = '3d'
        queue = 'long.q'
        scratch = '/tmp/${USER}'
    }

    withLabel: 'generate_dm_files' {
        cpus = 1
        memory = '1 GB'
        time = '1h'
        queue = 'short.q'
        scratch = '/tmp/${USER}'
    }

    errorStrategy = 'ignore'
}
